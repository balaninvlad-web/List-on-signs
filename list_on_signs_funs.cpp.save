#include "list_on_signs_func.h"

LinkedList* ListCtor()
{
    LinkedList* list = (LinkedList*)calloc(1, sizeof(LinkedList));

    if (!list)
    {
        fprintf(stderr, "ERORR: in Ctor - memory allocation\n");

        return NULL;
    }

    list->head = NULL;

    list->tail = NULL;

    list->size = 0;

    return list;
}

void ListDtor (LinkedList* list)
{
    Node* current = list->tail;

    while (current != NULL)
    {
        current = current->;
        
        
    }
    
    list->head = NULL;

    list->tail = NULL;

    list->size = 0;

    free(list);
}

Node* InsertNode (LinkedList* list, Node* current, int value)
{
    Node* new_node = (Node*) calloc(1, sizeof(Node));

    if (!new_node)
    {
        fprintf(stderr, "ERORR: in InsertNode - memory allocation\n");

        return NULL;
    }

    new_node->data = value;

    if(list->size ==0)
    {
        new_node->next = NULL;

        new_node->prev = NULL;

        list->head = new_node;

        list->tail = new_node;
    }
    else
    {
        if (current != NULL)
        {
            new_node->next = current->next;

            new_node->prev = current;

            if (current->next != NULL)
            {
                current->next->prev = new_node;
            }
            else
            {
                list->tail = new_node;
            }

            current->next = new_node;
        }
        else
        {
            new_node->next = list->head;

            new_node->prev = NULL;

            if (list->head != NULL)
            {
                list->head->prev = new_node;
            }
            else
            {
                list->tail = new_node;
            }

            list->head = new_node;
        }
    }

    list->size++;

    return new_node;
}

void PrintList (LinkedList* list)
{
    printf ("All list:");

    Node* current = list->head;

    while (current != NULL)
    {
        printf("%d  ", current->data);

        current = current->next;
    }
}

int DeleteNode (LinkedList* list, Node* node)
{
    if (list == NULL || node == NULL)
    {
        fprintf(stderr, "ERORR: in DeleteNode\n");

        return 1;
    }

    if (list->size == 1)
    {
        list->head = NULL;
        list->tail = NULL;
    }
    else if (node = list->head)
    {
        list->head = node->next;
        list->head->prev = NULL;
    }
    else if (node = list->tail)
    {
        list->tail = node->next;
        list->tail->next = NULL;
    }
    else
    {
        node->prev->next = node->next;
        node->next->prev = node->prev;
    }

    free(node);
    return 0;
}
